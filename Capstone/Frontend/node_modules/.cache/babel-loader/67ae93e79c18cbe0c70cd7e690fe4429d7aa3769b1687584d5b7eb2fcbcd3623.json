{"ast":null,"code":"import axios from 'axios';\nimport { Modal } from 'bootstrap';\nexport default {\n  name: 'VoucherManagement',\n  data() {\n    return {\n      vouchers: [],\n      voucherModal: null,\n      newVoucher: {\n        code: '',\n        type: 'percentage',\n        value: 10,\n        min_purchase: 100,\n        valid_from: '',\n        valid_until: ''\n      }\n    };\n  },\n  methods: {\n    async fetchVouchers() {\n      try {\n        const response = await axios.get('http://localhost:5555/admin/vouchers', {\n          withCredentials: true\n        });\n        if (response.data.success) {\n          this.vouchers = response.data.vouchers;\n        }\n      } catch (error) {\n        console.error('Error fetching vouchers:', error);\n        this.$toast.error('Failed to fetch vouchers');\n      }\n    },\n    showCreateVoucherModal() {\n      this.voucherModal.show();\n    },\n    closeVoucherModal() {\n      this.voucherModal.hide();\n      this.resetVoucherForm();\n    },\n    resetVoucherForm() {\n      this.newVoucher = {\n        code: '',\n        type: 'percentage',\n        value: 10,\n        min_purchase: 100,\n        valid_from: '',\n        valid_until: ''\n      };\n    },\n    async createVoucher() {\n      try {\n        const response = await axios.post('http://localhost:5555/admin/vouchers', this.newVoucher, {\n          withCredentials: true\n        });\n        if (response.data.success) {\n          this.closeVoucherModal();\n          await this.fetchVouchers();\n          this.$toast.success('Voucher created successfully!');\n        }\n      } catch (error) {\n        console.error('Error creating voucher:', error);\n        this.$toast.error('Failed to create voucher');\n      }\n    },\n    async deactivateVoucher(code) {\n      if (confirm('Are you sure you want to deactivate this voucher?')) {\n        try {\n          const response = await axios.delete(`http://localhost:5555/admin/vouchers/${code}`, {\n            withCredentials: true\n          });\n          if (response.data.success) {\n            await this.fetchVouchers();\n            this.$toast.success('Voucher deactivated successfully!');\n          }\n        } catch (error) {\n          console.error('Error deactivating voucher:', error);\n          this.$toast.error('Failed to deactivate voucher');\n        }\n      }\n    },\n    getStatusBadgeClass(status) {\n      return `badge ${status === 'active' ? 'bg-success' : 'bg-danger'}`;\n    },\n    formatDate(date) {\n      return new Date(date).toLocaleDateString();\n    }\n  },\n  mounted() {\n    this.voucherModal = new Modal(this.$refs.voucherModal);\n    this.fetchVouchers();\n  }\n};","map":{"version":3,"names":["axios","Modal","name","data","vouchers","voucherModal","newVoucher","code","type","value","min_purchase","valid_from","valid_until","methods","fetchVouchers","response","get","withCredentials","success","error","console","$toast","showCreateVoucherModal","show","closeVoucherModal","hide","resetVoucherForm","createVoucher","post","deactivateVoucher","confirm","delete","getStatusBadgeClass","status","formatDate","date","Date","toLocaleDateString","mounted","$refs"],"sources":["C:\\laragon\\www\\Abas-Adeva-Final-project-Appdevvv\\project_appdev\\Frontend\\src\\components\\VoucherManagement.vue"],"sourcesContent":["<template>\n  <div class=\"card shadow mb-4\">\n    <div class=\"card-header py-3 d-flex justify-content-between align-items-center\">\n      <h6 class=\"m-0 font-weight-bold text-primary\">Voucher Management</h6>\n      <button class=\"btn btn-primary\" @click=\"showCreateVoucherModal\">\n        <i class=\"fas fa-plus\"></i> Create Voucher\n      </button>\n    </div>\n    <div class=\"card-body\">\n      <div class=\"table-responsive\">\n        <table class=\"table table-bordered\">\n          <thead>\n            <tr>\n              <th>Code</th>\n              <th>Type</th>\n              <th>Value</th>\n              <th>Min. Purchase</th>\n              <th>Valid From</th>\n              <th>Valid Until</th>\n              <th>Status</th>\n              <th>Actions</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"voucher in vouchers\" :key=\"voucher.code\">\n              <td>{{ voucher.code }}</td>\n              <td>{{ voucher.type === 'percentage' ? 'Percentage Off' : 'Free Shipping' }}</td>\n              <td>{{ voucher.type === 'percentage' ? `${voucher.value}%` : 'Free Shipping' }}</td>\n              <td>₱{{ voucher.min_purchase }}</td>\n              <td>{{ formatDate(voucher.valid_from) }}</td>\n              <td>{{ formatDate(voucher.valid_until) }}</td>\n              <td>\n                <span :class=\"getStatusBadgeClass(voucher.status)\">\n                  {{ voucher.status }}\n                </span>\n              </td>\n              <td>\n                <button \n                  class=\"btn btn-sm btn-danger\"\n                  @click=\"deactivateVoucher(voucher.code)\"\n                  :disabled=\"voucher.status === 'inactive'\"\n                >\n                  Deactivate\n                </button>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n\n    <!-- Create Voucher Modal -->\n    <div class=\"modal fade\" id=\"createVoucherModal\" tabindex=\"-1\" ref=\"voucherModal\">\n      <div class=\"modal-dialog\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <h5 class=\"modal-title\">Create New Voucher</h5>\n            <button type=\"button\" class=\"btn-close\" @click=\"closeVoucherModal\"></button>\n          </div>\n          <div class=\"modal-body\">\n            <form @submit.prevent=\"createVoucher\">\n              <div class=\"mb-3\">\n                <label class=\"form-label\">Voucher Code</label>\n                <input \n                  type=\"text\" \n                  class=\"form-control\" \n                  v-model=\"newVoucher.code\"\n                  required\n                >\n              </div>\n              <div class=\"mb-3\">\n                <label class=\"form-label\">Type</label>\n                <select class=\"form-select\" v-model=\"newVoucher.type\" required>\n                  <option value=\"percentage\">Percentage Off</option>\n                  <option value=\"shipping\">Free Shipping</option>\n                </select>\n              </div>\n              <div class=\"mb-3\" v-if=\"newVoucher.type === 'percentage'\">\n                <label class=\"form-label\">Discount Percentage</label>\n                <input \n                  type=\"number\" \n                  class=\"form-control\" \n                  v-model=\"newVoucher.value\"\n                  min=\"1\"\n                  max=\"100\"\n                  required\n                >\n              </div>\n              <div class=\"mb-3\">\n                <label class=\"form-label\">Minimum Purchase Amount (₱)</label>\n                <input \n                  type=\"number\" \n                  class=\"form-control\" \n                  v-model=\"newVoucher.min_purchase\"\n                  min=\"0\"\n                  required\n                >\n              </div>\n              <div class=\"mb-3\">\n                <label class=\"form-label\">Valid From</label>\n                <input \n                  type=\"date\" \n                  class=\"form-control\" \n                  v-model=\"newVoucher.valid_from\"\n                  required\n                >\n              </div>\n              <div class=\"mb-3\">\n                <label class=\"form-label\">Valid Until</label>\n                <input \n                  type=\"date\" \n                  class=\"form-control\" \n                  v-model=\"newVoucher.valid_until\"\n                  required\n                >\n              </div>\n              <div class=\"text-end\">\n                <button type=\"button\" class=\"btn btn-secondary me-2\" @click=\"closeVoucherModal\">\n                  Cancel\n                </button>\n                <button type=\"submit\" class=\"btn btn-primary\">\n                  Create Voucher\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport { Modal } from 'bootstrap';\n\nexport default {\n  name: 'VoucherManagement',\n  data() {\n    return {\n      vouchers: [],\n      voucherModal: null,\n      newVoucher: {\n        code: '',\n        type: 'percentage',\n        value: 10,\n        min_purchase: 100,\n        valid_from: '',\n        valid_until: ''\n      }\n    };\n  },\n  methods: {\n    async fetchVouchers() {\n      try {\n        const response = await axios.get('http://localhost:5555/admin/vouchers', {\n          withCredentials: true\n        });\n        if (response.data.success) {\n          this.vouchers = response.data.vouchers;\n        }\n      } catch (error) {\n        console.error('Error fetching vouchers:', error);\n        this.$toast.error('Failed to fetch vouchers');\n      }\n    },\n\n    showCreateVoucherModal() {\n      this.voucherModal.show();\n    },\n\n    closeVoucherModal() {\n      this.voucherModal.hide();\n      this.resetVoucherForm();\n    },\n\n    resetVoucherForm() {\n      this.newVoucher = {\n        code: '',\n        type: 'percentage',\n        value: 10,\n        min_purchase: 100,\n        valid_from: '',\n        valid_until: ''\n      };\n    },\n\n    async createVoucher() {\n      try {\n        const response = await axios.post(\n          'http://localhost:5555/admin/vouchers',\n          this.newVoucher,\n          { withCredentials: true }\n        );\n        if (response.data.success) {\n          this.closeVoucherModal();\n          await this.fetchVouchers();\n          this.$toast.success('Voucher created successfully!');\n        }\n      } catch (error) {\n        console.error('Error creating voucher:', error);\n        this.$toast.error('Failed to create voucher');\n      }\n    },\n\n    async deactivateVoucher(code) {\n      if (confirm('Are you sure you want to deactivate this voucher?')) {\n        try {\n          const response = await axios.delete(\n            `http://localhost:5555/admin/vouchers/${code}`,\n            { withCredentials: true }\n          );\n          if (response.data.success) {\n            await this.fetchVouchers();\n            this.$toast.success('Voucher deactivated successfully!');\n          }\n        } catch (error) {\n          console.error('Error deactivating voucher:', error);\n          this.$toast.error('Failed to deactivate voucher');\n        }\n      }\n    },\n\n    getStatusBadgeClass(status) {\n      return `badge ${status === 'active' ? 'bg-success' : 'bg-danger'}`;\n    },\n\n    formatDate(date) {\n      return new Date(date).toLocaleDateString();\n    }\n  },\n  mounted() {\n    this.voucherModal = new Modal(this.$refs.voucherModal);\n    this.fetchVouchers();\n  }\n};\n</script>\n\n<style scoped>\n.badge {\n  padding: 0.5em 1em;\n  font-size: 0.875em;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}