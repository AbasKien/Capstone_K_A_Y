{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport axios from 'axios';\nimport { ref, computed } from 'vue';\nimport { useRouter } from 'vue-router';\nexport default {\n  setup() {\n    const router = useRouter();\n    const products = ref([]);\n    const productLogs = ref([]);\n    const showLogsModal = ref(false);\n    const selectedProduct = ref(null);\n    const searchTerm = ref('');\n    const productsPerPage = ref(10);\n    const baseUrl = 'http://localhost:5555';\n    const fetchProducts = async () => {\n      try {\n        const response = await axios.get(`${baseUrl}/products`);\n        products.value = response.data.products;\n      } catch (error) {\n        console.error('Error fetching products:', error);\n      }\n    };\n    const fetchProductLogs = async () => {\n      try {\n        const response = await axios.get(`${baseUrl}/product-logs`);\n        productLogs.value = response.data;\n      } catch (error) {\n        console.error('Error fetching product logs:', error);\n      }\n    };\n    const filteredProducts = computed(() => {\n      return products.value.filter(product => product.name.toLowerCase().includes(searchTerm.value.toLowerCase()) || product.id.toString().includes(searchTerm.value));\n    });\n    const selectedProductLogs = computed(() => {\n      if (!selectedProduct.value) return [];\n      return productLogs.value.filter(log => log.product_id === selectedProduct.value.id);\n    });\n    const viewLogs = product => {\n      selectedProduct.value = product;\n      showLogsModal.value = true;\n    };\n    const formatDate = date => {\n      return new Date(date).toLocaleString();\n    };\n    const handleLogout = async () => {\n      try {\n        localStorage.removeItem('token');\n        localStorage.removeItem('user');\n        localStorage.removeItem('role');\n        await axios.post(`${baseUrl}/logout`);\n        router.push('/login');\n      } catch (error) {\n        console.error('Logout error:', error);\n        router.push('/login');\n      }\n    };\n\n    // Initial data fetch\n    fetchProducts();\n    fetchProductLogs();\n    return {\n      products,\n      productLogs,\n      showLogsModal,\n      selectedProduct,\n      selectedProductLogs,\n      searchTerm,\n      productsPerPage,\n      filteredProducts,\n      viewLogs,\n      formatDate,\n      handleLogout\n    };\n  }\n};","map":{"version":3,"names":["axios","ref","computed","useRouter","setup","router","products","productLogs","showLogsModal","selectedProduct","searchTerm","productsPerPage","baseUrl","fetchProducts","response","get","value","data","error","console","fetchProductLogs","filteredProducts","filter","product","name","toLowerCase","includes","id","toString","selectedProductLogs","log","product_id","viewLogs","formatDate","date","Date","toLocaleString","handleLogout","localStorage","removeItem","post","push"],"sources":["C:\\laragon\\www\\Abas-Adeva-Final-project-Appdevvv\\project_appdev\\Frontend\\src\\views\\product-logs.vue"],"sourcesContent":["<template>\n  <div class=\"d-flex\">\n    <!-- Sidebar -->\n    <nav class=\"sidebar bg-dark text-white vh-100 p-3\">\n      <h4 class=\"text-white mb-4\">Admin Dashboard</h4>\n      <ul class=\"nav nav-pills flex-column\">\n        <!-- Dashboard Link -->\n        <li class=\"nav-item\">\n          <router-link to=\"/admin/dashboard\" class=\"nav-link text-white\" active-class=\"active\">\n            <i class=\"fas fa-home me-2\"></i> Dashboard\n          </router-link>\n        </li>\n\n        <!-- Products Link -->\n        <li class=\"nav-item\">\n          <router-link to=\"/admin/products\" class=\"nav-link text-white\" active-class=\"active\">\n            <i class=\"fas fa-box me-2\"></i> Products\n          </router-link>\n        </li>\n\n        <!-- Product Logs Link -->\n        <li class=\"nav-item\">\n          <router-link to=\"/admin/product-logs\" class=\"nav-link text-white\" active-class=\"active\">\n            <i class=\"fas fa-clipboard-list me-2\"></i> Product Logs\n          </router-link>\n        </li>\n\n        <!-- Orders Link -->\n        <li class=\"nav-item\">\n          <router-link to=\"/admin/orders\" class=\"nav-link text-white\" active-class=\"active\">\n            <i class=\"fas fa-truck me-2\"></i> Orders\n          </router-link>\n        </li>\n\n        <!-- Logout Button -->\n        <li class=\"nav-item mt-auto\">\n          <button @click=\"handleLogout\" class=\"btn btn-danger w-100 mt-3\">\n            <i class=\"fas fa-sign-out-alt me-2\"></i> Logout\n          </button>\n        </li>\n      </ul>\n    </nav>\n\n    <!-- Main Content -->\n    <div class=\"flex-grow-1 p-4\">\n      <div class=\"container\">\n        <h2>Products and Logs</h2>\n\n        <!-- Products Table -->\n        <div class=\"card mb-4\">\n          <div class=\"card-header\">\n            <h3>Products</h3>\n          </div>\n          <div class=\"card-body\">\n            <div class=\"table-responsive\">\n              <div class=\"d-flex justify-content-between mb-3\">\n                <div>\n                  Show \n                  <select v-model=\"productsPerPage\" class=\"form-select-sm mx-2\">\n                    <option value=\"10\">10</option>\n                    <option value=\"25\">25</option>\n                    <option value=\"50\">50</option>\n                  </select>\n                  entries\n                </div>\n                <div>\n                  <input type=\"text\" v-model=\"searchTerm\" class=\"form-control form-control-sm\" placeholder=\"Search...\">\n                </div>\n              </div>\n\n              <table class=\"table table-hover\">\n                <thead>\n                  <tr>\n                    <th>ID</th>\n                    <th>Name</th>\n                    <th>Stock</th>\n                    <th>Actions</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr v-for=\"product in filteredProducts\" :key=\"product.id\">\n                    <td>{{ product.id }}</td>\n                    <td>{{ product.name }}</td>\n                    <td>{{ product.stock }}</td>\n                    <td>\n                      <button class=\"btn btn-info btn-sm\" @click=\"viewLogs(product)\">\n                        View Logs\n                      </button>\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n\n        <!-- Logs Modal -->\n        <div class=\"modal fade\" :class=\"{ show: showLogsModal }\" tabindex=\"-1\" v-if=\"showLogsModal\">\n          <div class=\"modal-dialog modal-lg\">\n            <div class=\"modal-content\">\n              <div class=\"modal-header\">\n                <h5 class=\"modal-title\">Product Logs - {{ selectedProduct?.name }}</h5>\n                <button type=\"button\" class=\"btn-close\" @click=\"showLogsModal = false\"></button>\n              </div>\n              <div class=\"modal-body\">\n                <table class=\"table\">\n                  <thead>\n                    <tr>\n                      <th>ID</th>\n                      <th>Previous Quantity</th>\n                      <th>Quantity Changed</th>\n                      <th>New Quantity</th>\n                      <th>Reason</th>\n                      <th>Created At</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    <tr v-for=\"log in selectedProductLogs\" :key=\"log.id\">\n                      <td>{{ log.id }}</td>\n                      <td>{{ log.previous_quantity }}</td>\n                      <td>{{ log.quantity_changed }}</td>\n                      <td>{{ log.new_quantity }}</td>\n                      <td>{{ log.reason }}</td>\n                      <td>{{ formatDate(log.created_at) }}</td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport { ref, computed } from 'vue';\nimport { useRouter } from 'vue-router';\n\nexport default {\n  setup() {\n    const router = useRouter();\n    const products = ref([]);\n    const productLogs = ref([]);\n    const showLogsModal = ref(false);\n    const selectedProduct = ref(null);\n    const searchTerm = ref('');\n    const productsPerPage = ref(10);\n    const baseUrl = 'http://localhost:5555';\n\n    const fetchProducts = async () => {\n      try {\n        const response = await axios.get(`${baseUrl}/products`);\n        products.value = response.data.products;\n      } catch (error) {\n        console.error('Error fetching products:', error);\n      }\n    };\n\n    const fetchProductLogs = async () => {\n      try {\n        const response = await axios.get(`${baseUrl}/product-logs`);\n        productLogs.value = response.data;\n      } catch (error) {\n        console.error('Error fetching product logs:', error);\n      }\n    };\n\n    const filteredProducts = computed(() => {\n      return products.value.filter(product => \n        product.name.toLowerCase().includes(searchTerm.value.toLowerCase()) ||\n        product.id.toString().includes(searchTerm.value)\n      );\n    });\n\n    const selectedProductLogs = computed(() => {\n      if (!selectedProduct.value) return [];\n      return productLogs.value.filter(log => log.product_id === selectedProduct.value.id);\n    });\n\n    const viewLogs = (product) => {\n      selectedProduct.value = product;\n      showLogsModal.value = true;\n    };\n\n    const formatDate = (date) => {\n      return new Date(date).toLocaleString();\n    };\n\n    const handleLogout = async () => {\n      try {\n        localStorage.removeItem('token');\n        localStorage.removeItem('user');\n        localStorage.removeItem('role');\n        await axios.post(`${baseUrl}/logout`);\n        router.push('/login');\n      } catch (error) {\n        console.error('Logout error:', error);\n        router.push('/login');\n      }\n    };\n\n    // Initial data fetch\n    fetchProducts();\n    fetchProductLogs();\n\n    return {\n      products,\n      productLogs,\n      showLogsModal,\n      selectedProduct,\n      selectedProductLogs,\n      searchTerm,\n      productsPerPage,\n      filteredProducts,\n      viewLogs,\n      formatDate,\n      handleLogout\n    };\n  }\n};\n</script>\n\n<style scoped>\n.modal.show {\n  display: block;\n  background-color: rgba(0, 0, 0, 0.5);\n}\n\n.sidebar {\n  width: 250px;\n  min-height: 100vh;\n}\n\n.main-content {\n  margin-left: 250px;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}