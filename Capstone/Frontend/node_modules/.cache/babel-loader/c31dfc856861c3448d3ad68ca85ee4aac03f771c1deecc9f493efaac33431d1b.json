{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, withModifiers as _withModifiers, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"auth-page\"\n};\nconst _hoisted_2 = {\n  class: \"auth-container\"\n};\nconst _hoisted_3 = {\n  class: \"form-wrapper\"\n};\nconst _hoisted_4 = {\n  class: \"auth-card\"\n};\nconst _hoisted_5 = {\n  class: \"form-group\"\n};\nconst _hoisted_6 = {\n  class: \"form-group\"\n};\nconst _hoisted_7 = {\n  key: 0,\n  class: \"error-message\"\n};\nconst _hoisted_8 = {\n  class: \"form-buttons\"\n};\nconst _hoisted_9 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[7] || (_cache[7] = _createElementVNode(\"h1\", {\n    class: \"system-title\"\n  }, \"Document Tracking System\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_3, [_createCommentVNode(\" Document Submission Form \"), _cache[6] || (_cache[6] = _createStaticVNode(\"<div class=\\\"document-form\\\" data-v-28e76de4><h2 class=\\\"form-title\\\" data-v-28e76de4>Submit Document (For Guest)</h2><form data-v-28e76de4><div class=\\\"form-group\\\" data-v-28e76de4><label data-v-28e76de4>From:</label><input type=\\\"text\\\" placeholder=\\\"Full Name\\\" required data-v-28e76de4></div><div class=\\\"form-group\\\" data-v-28e76de4><label data-v-28e76de4>Office:</label><input type=\\\"text\\\" placeholder=\\\"Office\\\" required data-v-28e76de4></div><div class=\\\"form-group\\\" data-v-28e76de4><label data-v-28e76de4>Document Type:</label><select required data-v-28e76de4><option value=\\\"\\\" data-v-28e76de4>--Select--</option><option value=\\\"Report\\\" data-v-28e76de4>Report</option><option value=\\\"Blueprint\\\" data-v-28e76de4>Blueprint</option></select></div><div class=\\\"form-group\\\" data-v-28e76de4><label data-v-28e76de4>Details:</label><textarea placeholder=\\\"Description, Date, Destination\\\" required data-v-28e76de4></textarea></div><div class=\\\"form-group\\\" data-v-28e76de4><label data-v-28e76de4>Purpose:</label><input type=\\\"text\\\" placeholder=\\\"Purposes or Actions to be taken...\\\" required data-v-28e76de4></div><div class=\\\"form-group\\\" data-v-28e76de4><label data-v-28e76de4>To:</label><input type=\\\"text\\\" placeholder=\\\"Receiving Office\\\" required data-v-28e76de4></div><div class=\\\"form-buttons\\\" data-v-28e76de4><button type=\\\"reset\\\" class=\\\"btn btn-cancel\\\" data-v-28e76de4>Cancel</button><button type=\\\"submit\\\" class=\\\"btn btn-submit\\\" data-v-28e76de4>Submit</button></div></form></div>\", 1)), _createCommentVNode(\" Login Form \"), _createElementVNode(\"div\", _hoisted_4, [_cache[5] || (_cache[5] = _createElementVNode(\"h2\", {\n    class: \"form-title\"\n  }, \"Log In (For Registered Users)\", -1 /* HOISTED */)), _createElementVNode(\"form\", {\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => $options.handleLogin && $options.handleLogin(...args), [\"prevent\"])),\n    class: \"auth-form\"\n  }, [_createElementVNode(\"div\", _hoisted_5, [_cache[3] || (_cache[3] = _createElementVNode(\"label\", {\n    for: \"email\"\n  }, \"Email\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"email\",\n    id: \"email\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.email = $event),\n    required: \"\",\n    placeholder: \"Enter your email\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.email]])]), _createElementVNode(\"div\", _hoisted_6, [_cache[4] || (_cache[4] = _createElementVNode(\"label\", {\n    for: \"password\"\n  }, \"Password\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    id: \"password\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.password = $event),\n    required: \"\",\n    placeholder: \"Enter your password\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.password]])]), $data.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, _toDisplayString($data.error), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"button\", {\n    type: \"submit\",\n    class: \"btn btn-login\",\n    disabled: $data.isLoading\n  }, _toDisplayString($data.isLoading ? 'Logging in...' : 'Sign in'), 9 /* TEXT, PROPS */, _hoisted_9)])], 32 /* NEED_HYDRATION */)])])])]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_createCommentVNode","_createStaticVNode","_hoisted_4","onSubmit","_cache","_withModifiers","args","$options","handleLogin","_hoisted_5","for","type","id","$event","$data","email","required","placeholder","_hoisted_6","password","error","_hoisted_7","_toDisplayString","_hoisted_8","disabled","isLoading","_hoisted_9"],"sources":["C:\\laragon\\www\\capstone\\project_appdev\\Frontend\\src\\views\\loginview.vue"],"sourcesContent":["<template>\n  <div class=\"auth-page\">\n    <div class=\"auth-container\">\n      <h1 class=\"system-title\">Document Tracking System</h1>\n      <div class=\"form-wrapper\">\n        <!-- Document Submission Form -->\n        <div class=\"document-form\">\n          <h2 class=\"form-title\">Submit Document (For Guest)</h2>\n          <form>\n            <div class=\"form-group\">\n              <label>From:</label>\n              <input type=\"text\" placeholder=\"Full Name\" required />\n            </div>\n            <div class=\"form-group\">\n              <label>Office:</label>\n              <input type=\"text\" placeholder=\"Office\" required />\n            </div>\n            <div class=\"form-group\">\n              <label>Document Type:</label>\n              <select required>\n                <option value=\"\">--Select--</option>\n                <option value=\"Report\">Report</option>\n                <option value=\"Blueprint\">Blueprint</option>\n              </select>\n            </div>\n            <div class=\"form-group\">\n              <label>Details:</label>\n              <textarea placeholder=\"Description, Date, Destination\" required></textarea>\n            </div>\n            <div class=\"form-group\">\n              <label>Purpose:</label>\n              <input type=\"text\" placeholder=\"Purposes or Actions to be taken...\" required />\n            </div>\n            <div class=\"form-group\">\n              <label>To:</label>\n              <input type=\"text\" placeholder=\"Receiving Office\" required />\n            </div>\n            <div class=\"form-buttons\">\n              <button type=\"reset\" class=\"btn btn-cancel\">Cancel</button>\n              <button type=\"submit\" class=\"btn btn-submit\">Submit</button>\n            </div>\n          </form>\n        </div>\n\n        <!-- Login Form -->\n        <div class=\"auth-card\">\n          <h2 class=\"form-title\">Log In (For Registered Users)</h2>\n          <form @submit.prevent=\"handleLogin\" class=\"auth-form\">\n            <div class=\"form-group\">\n              <label for=\"email\">Email</label>\n              <input\n                type=\"email\"\n                id=\"email\"\n                v-model=\"email\"\n                required\n                placeholder=\"Enter your email\"\n              />\n            </div>\n            <div class=\"form-group\">\n              <label for=\"password\">Password</label>\n              <input\n                type=\"password\"\n                id=\"password\"\n                v-model=\"password\"\n                required\n                placeholder=\"Enter your password\"\n              />\n            </div>\n            <div v-if=\"error\" class=\"error-message\">{{ error }}</div>\n            <div class=\"form-buttons\">\n              <button type=\"submit\" class=\"btn btn-login\" :disabled=\"isLoading\">\n                {{ isLoading ? 'Logging in...' : 'Sign in' }}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"LoginView\",\n  data() {\n    return {\n      email: \"\",\n      password: \"\",\n      error: null,\n      isLoading: false,\n    };\n  },\n  methods: {\n    async handleLogin() {\n      if (!this.email || !this.password) {\n        this.error = \"Please fill in all fields\";\n        return;\n      }\n\n      this.isLoading = true;\n      this.error = null;\n\n      try {\n        const response = await axios.post(\n          \"http://localhost:5555/login\",\n          {\n            email: this.email,\n            password: this.password,\n          },\n          { withCredentials: true }\n        );\n\n        if (response.data.needsVerification) {\n          this.error = response.data.message;\n          return;\n        }\n\n        localStorage.setItem(\"userEmail\", response.data.email);\n        localStorage.setItem(\"userRole\", response.data.role);\n        localStorage.setItem(\"token\", response.data.token);\n        localStorage.setItem(\"isLoggedIn\", \"true\");\n\n        const role = response.data.role;\n        const allowedRoles = [\n          \"admin\",\n          \"Lead architect\",\n          \"Secretary\",\n          \"Book keeper\",\n          \"Liaison\",\n          \"Apprentice\",\n        ];\n        if (allowedRoles.includes(role)) {\n          await this.$router.push(\"/home\");\n        } else {\n          await this.$router.push(\"/admin/dashboard\");\n        }\n      } catch (err) {\n        this.error =\n          err.response?.data?.message || \"Login failed. Please try again.\";\n      } finally {\n        this.isLoading = false;\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n/* Page Layout */\n.auth-page {\n  min-height: 100vh;\n  background: #f5f5f5;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 2rem;\n  font-family: \"Poppins\", sans-serif;\n}\n\n.auth-container {\n  width: 90%;\n  max-width: 1200px;\n  text-align: center;\n}\n\n.system-title {\n  font-size: 1.8rem;\n  font-weight: bold;\n  color: #333;\n  margin-bottom: 1rem;\n}\n\n/* Forms Wrapper */\n.form-wrapper {\n  display: flex;\n  gap: 2rem;\n  justify-content: space-between;\n}\n\n.document-form,\n.auth-card {\n  background: white;\n  padding: 2rem;\n  border-radius: 8px;\n  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);\n  width: 48%;\n  color: #333;\n}\n\n.form-title {\n  font-size: 1.5rem;\n  font-weight: 600;\n  margin-bottom: 1rem;\n}\n\n/* Form Fields */\n.form-group {\n  margin-bottom: 1rem;\n  text-align: left;\n}\n\nlabel {\n  font-weight: 500;\n  display: block;\n  margin-bottom: 0.5rem;\n}\n\ninput,\ntextarea,\nselect {\n  width: 100%;\n  padding: 0.75rem;\n  border: 1px solid #ccc;\n  border-radius: 6px;\n  font-size: 1rem;\n}\n\ntextarea {\n  height: 80px;\n}\n\n/* Buttons */\n.btn {\n  padding: 0.75rem 1.5rem;\n  border: none;\n  border-radius: 6px;\n  font-size: 1rem;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.btn-submit {\n  background: #4caf50;\n  color: white;\n}\n\n.btn-login {\n  background: #2196f3;\n  color: white;\n  width: 100%;\n}\n\n.btn:hover {\n  opacity: 0.8;\n}\n</style>\n"],"mappings":";;EACOA,KAAK,EAAC;AAAW;;EACfA,KAAK,EAAC;AAAgB;;EAEpBA,KAAK,EAAC;AAAc;;EAyClBA,KAAK,EAAC;AAAW;;EAGbA,KAAK,EAAC;AAAY;;EAUlBA,KAAK,EAAC;AAAY;;EA1DnCC,GAAA;EAoE8BD,KAAK,EAAC;;;EACnBA,KAAK,EAAC;AAAc;mBArErC;;uBACEE,mBAAA,CA6EM,OA7ENC,UA6EM,GA5EJC,mBAAA,CA2EM,OA3ENC,UA2EM,G,0BA1EJD,mBAAA,CAAsD;IAAlDJ,KAAK,EAAC;EAAc,GAAC,0BAAwB,sBACjDI,mBAAA,CAwEM,OAxENE,UAwEM,GAvEJC,mBAAA,8BAAiC,E,0BALzCC,kBAAA,2+CA4CQD,mBAAA,gBAAmB,EACnBH,mBAAA,CA8BM,OA9BNK,UA8BM,G,0BA7BJL,mBAAA,CAAyD;IAArDJ,KAAK,EAAC;EAAY,GAAC,+BAA6B,sBACpDI,mBAAA,CA2BO;IA3BAM,QAAM,EAAAC,MAAA,QAAAA,MAAA,MA/CvBC,cAAA,KAAAC,IAAA,KA+CiCC,QAAA,CAAAC,WAAA,IAAAD,QAAA,CAAAC,WAAA,IAAAF,IAAA,CAAW;IAAEb,KAAK,EAAC;MACxCI,mBAAA,CASM,OATNY,UASM,G,0BARJZ,mBAAA,CAAgC;IAAzBa,GAAG,EAAC;EAAO,GAAC,OAAK,sB,gBACxBb,mBAAA,CAME;IALAc,IAAI,EAAC,OAAO;IACZC,EAAE,EAAC,OAAO;IApD1B,uBAAAR,MAAA,QAAAA,MAAA,MAAAS,MAAA,IAqDyBC,KAAA,CAAAC,KAAK,GAAAF,MAAA;IACdG,QAAQ,EAAR,EAAQ;IACRC,WAAW,EAAC;iDAFHH,KAAA,CAAAC,KAAK,E,KAKlBlB,mBAAA,CASM,OATNqB,UASM,G,0BARJrB,mBAAA,CAAsC;IAA/Ba,GAAG,EAAC;EAAU,GAAC,UAAQ,sB,gBAC9Bb,mBAAA,CAME;IALAc,IAAI,EAAC,UAAU;IACfC,EAAE,EAAC,UAAU;IA9D7B,uBAAAR,MAAA,QAAAA,MAAA,MAAAS,MAAA,IA+DyBC,KAAA,CAAAK,QAAQ,GAAAN,MAAA;IACjBG,QAAQ,EAAR,EAAQ;IACRC,WAAW,EAAC;iDAFHH,KAAA,CAAAK,QAAQ,E,KAKVL,KAAA,CAAAM,KAAK,I,cAAhBzB,mBAAA,CAAyD,OAAzD0B,UAAyD,EAAAC,gBAAA,CAAdR,KAAA,CAAAM,KAAK,oBApE5DpB,mBAAA,gBAqEYH,mBAAA,CAIM,OAJN0B,UAIM,GAHJ1B,mBAAA,CAES;IAFDc,IAAI,EAAC,QAAQ;IAAClB,KAAK,EAAC,eAAe;IAAE+B,QAAQ,EAAEV,KAAA,CAAAW;sBAClDX,KAAA,CAAAW,SAAS,sDAvE5BC,UAAA,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}