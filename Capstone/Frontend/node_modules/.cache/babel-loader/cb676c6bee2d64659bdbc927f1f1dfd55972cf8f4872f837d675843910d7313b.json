{"ast":null,"code":"import \"core-js/modules/esnext.iterator.map.js\";\nimport { Bar } from 'vue-chartjs';\nimport { Chart as ChartJS, Title, Tooltip, Legend, BarElement, CategoryScale, LinearScale } from 'chart.js';\nChartJS.register(Title, Tooltip, Legend, BarElement, CategoryScale, LinearScale);\nexport default {\n  components: {\n    BarChart: Bar\n  },\n  data() {\n    return {\n      chartData: {\n        labels: [],\n        // Product names\n        datasets: [{\n          label: 'Stock',\n          data: [],\n          // Stock values\n          backgroundColor: '#007bff'\n        }]\n      },\n      chartOptions: {\n        responsive: true,\n        plugins: {\n          legend: {\n            display: true,\n            position: 'top'\n          }\n        }\n      }\n    };\n  },\n  async mounted() {\n    try {\n      const response = await fetch('http://localhost:5555/products/stock-overview');\n      if (!response.ok) {\n        throw new Error(`HTTP error! Status: ${response.status}`);\n      }\n      const data = await response.json();\n      console.log('Fetched data:', data); // Check the response content\n\n      if (data && Array.isArray(data.stockOverview)) {\n        this.chartData.labels = data.stockOverview.map(product => product.name);\n        this.chartData.datasets[0].data = data.stockOverview.map(product => product.stock);\n      } else {\n        console.error(\"Expected stockOverview to be an array:\", data);\n        this.chartData.labels = [];\n        this.chartData.datasets[0].data = [];\n      }\n    } catch (error) {\n      console.error('Failed to fetch product stock data:', error);\n      // Set default values to avoid crashing the component\n      this.chartData.labels = [];\n      this.chartData.datasets[0].data = [];\n    }\n  }\n};","map":{"version":3,"names":["Bar","Chart","ChartJS","Title","Tooltip","Legend","BarElement","CategoryScale","LinearScale","register","components","BarChart","data","chartData","labels","datasets","label","backgroundColor","chartOptions","responsive","plugins","legend","display","position","mounted","response","fetch","ok","Error","status","json","console","log","Array","isArray","stockOverview","map","product","name","stock","error"],"sources":["C:\\laragon\\www\\Abas-Adeva-Final-project-Appdevvv\\project_appdev\\Frontend\\src\\views\\ProductStockChart.vue"],"sourcesContent":["<template>\r\n    <div class=\"card\">\r\n      <div class=\"card-header\">\r\n        <h5>Stock Changes Over Time by Product</h5>\r\n      </div>\r\n      <div class=\"card-body\">\r\n        <!-- Render the chart only when chartData is ready -->\r\n        <BarChart v-if=\"chartData && chartData.labels.length\" :data=\"chartData\" :options=\"chartOptions\"\r\n          class=\"chart-small\" />\r\n        <p v-else>Loading chart data...</p>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import { Bar } from 'vue-chartjs';\r\n  import {\r\n    Chart as ChartJS,\r\n    Title,\r\n    Tooltip,\r\n    Legend,\r\n    BarElement,\r\n    CategoryScale,\r\n    LinearScale,\r\n  } from 'chart.js';\r\n  \r\n  ChartJS.register(Title, Tooltip, Legend, BarElement, CategoryScale, LinearScale);\r\n  \r\n  export default {\r\n    components: {\r\n      BarChart: Bar,\r\n    },\r\n    data() {\r\n      return {\r\n        chartData: {\r\n          labels: [], // Product names\r\n          datasets: [\r\n            {\r\n              label: 'Stock',\r\n              data: [], // Stock values\r\n              backgroundColor: '#007bff',\r\n            },\r\n          ],\r\n        },\r\n        chartOptions: {\r\n          responsive: true,\r\n          plugins: {\r\n            legend: {\r\n              display: true,\r\n              position: 'top',\r\n            },\r\n          },\r\n        },\r\n      };\r\n    },\r\n    async mounted() {\r\n      try {\r\n        const response = await fetch('http://localhost:5555/products/stock-overview');\r\n        if (!response.ok) {\r\n          throw new Error(`HTTP error! Status: ${response.status}`);\r\n        }\r\n        const data = await response.json();\r\n        console.log('Fetched data:', data); // Check the response content\r\n  \r\n        if (data && Array.isArray(data.stockOverview)) {\r\n          this.chartData.labels = data.stockOverview.map(product => product.name);\r\n          this.chartData.datasets[0].data = data.stockOverview.map(product => product.stock);\r\n        } else {\r\n          console.error(\"Expected stockOverview to be an array:\", data);\r\n          this.chartData.labels = [];\r\n          this.chartData.datasets[0].data = [];\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to fetch product stock data:', error);\r\n        // Set default values to avoid crashing the component\r\n        this.chartData.labels = [];\r\n        this.chartData.datasets[0].data = [];\r\n      }\r\n    },\r\n  };\r\n  </script>\r\n  "],"mappings":";AAeE,SAASA,GAAE,QAAS,aAAa;AACjC,SACEC,KAAI,IAAKC,OAAO,EAChBC,KAAK,EACLC,OAAO,EACPC,MAAM,EACNC,UAAU,EACVC,aAAa,EACbC,WAAW,QACN,UAAU;AAEjBN,OAAO,CAACO,QAAQ,CAACN,KAAK,EAAEC,OAAO,EAAEC,MAAM,EAAEC,UAAU,EAAEC,aAAa,EAAEC,WAAW,CAAC;AAEhF,eAAe;EACbE,UAAU,EAAE;IACVC,QAAQ,EAAEX;EACZ,CAAC;EACDY,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,SAAS,EAAE;QACTC,MAAM,EAAE,EAAE;QAAE;QACZC,QAAQ,EAAE,CACR;UACEC,KAAK,EAAE,OAAO;UACdJ,IAAI,EAAE,EAAE;UAAE;UACVK,eAAe,EAAE;QACnB,CAAC;MAEL,CAAC;MACDC,YAAY,EAAE;QACZC,UAAU,EAAE,IAAI;QAChBC,OAAO,EAAE;UACPC,MAAM,EAAE;YACNC,OAAO,EAAE,IAAI;YACbC,QAAQ,EAAE;UACZ;QACF;MACF;IACF,CAAC;EACH,CAAC;EACD,MAAMC,OAAOA,CAAA,EAAG;IACd,IAAI;MACF,MAAMC,QAAO,GAAI,MAAMC,KAAK,CAAC,+CAA+C,CAAC;MAC7E,IAAI,CAACD,QAAQ,CAACE,EAAE,EAAE;QAChB,MAAM,IAAIC,KAAK,CAAC,uBAAuBH,QAAQ,CAACI,MAAM,EAAE,CAAC;MAC3D;MACA,MAAMjB,IAAG,GAAI,MAAMa,QAAQ,CAACK,IAAI,CAAC,CAAC;MAClCC,OAAO,CAACC,GAAG,CAAC,eAAe,EAAEpB,IAAI,CAAC,EAAE;;MAEpC,IAAIA,IAAG,IAAKqB,KAAK,CAACC,OAAO,CAACtB,IAAI,CAACuB,aAAa,CAAC,EAAE;QAC7C,IAAI,CAACtB,SAAS,CAACC,MAAK,GAAIF,IAAI,CAACuB,aAAa,CAACC,GAAG,CAACC,OAAM,IAAKA,OAAO,CAACC,IAAI,CAAC;QACvE,IAAI,CAACzB,SAAS,CAACE,QAAQ,CAAC,CAAC,CAAC,CAACH,IAAG,GAAIA,IAAI,CAACuB,aAAa,CAACC,GAAG,CAACC,OAAM,IAAKA,OAAO,CAACE,KAAK,CAAC;MACpF,OAAO;QACLR,OAAO,CAACS,KAAK,CAAC,wCAAwC,EAAE5B,IAAI,CAAC;QAC7D,IAAI,CAACC,SAAS,CAACC,MAAK,GAAI,EAAE;QAC1B,IAAI,CAACD,SAAS,CAACE,QAAQ,CAAC,CAAC,CAAC,CAACH,IAAG,GAAI,EAAE;MACtC;IACF,EAAE,OAAO4B,KAAK,EAAE;MACdT,OAAO,CAACS,KAAK,CAAC,qCAAqC,EAAEA,KAAK,CAAC;MAC3D;MACA,IAAI,CAAC3B,SAAS,CAACC,MAAK,GAAI,EAAE;MAC1B,IAAI,CAACD,SAAS,CAACE,QAAQ,CAAC,CAAC,CAAC,CAACH,IAAG,GAAI,EAAE;IACtC;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}